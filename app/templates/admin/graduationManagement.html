{% set title = "Graduation Management" %}
{% extends "base.html" %}

{% block scripts %}
  {{super()}}
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
  <script type="module" src="/static/js/graduationManagement.js"></script>
  <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.js"></script>

  {% block styles %}
    {{super()}}
    <link rel="stylesheet" type="text/css" href="/static/css/graduationManagement.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  {% endblock %}
{% endblock %}



{% block app_content %}
<h1 class="text-center mb-5">Graduation Management</h1>
<div class="col-md-3 me-auto"></div>
<div class="d-flex justify-content-between align-items-center mb-3">
  <div class="btn-group">
    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" >
      All
    </button>
    <div class="dropdown-menu">
      <a class="dropdown-item" data-filter="all"  >All</a>
      <a class="dropdown-item" data-filter="bonner" >Bonner Students</a>
      <a class="dropdown-item" data-filter="cce" >CCE Minor</a>
    </div>
  </div>
  <div class="btn-group">
    <button type="button" class="btn btn-primary dropdown-toggle bonner-filter" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" >
      Bonner Cohorts
    </button>
    <div class="dropdown-menu">
      {% for year, students in bonnercohorts.items() %}
        <a class="dropdown-item dropdown-item-new" data-cohort-year="{{year}}">{{year}}-{{year+1}}</a> 
        {% for student in students %}
            <tr data-student-cohort="{{student.cohortYear}}">
              <td id="{{student.username}}" class="align-middle">
                  <a href="/profile/{{student.username}}?accordion=bonner">{{student.firstName}} {{student.lastName}}</a>
              </td>
            </tr>
          {% endfor %}
      {%endfor%}
    </div>
  </div>

  <div id="selectAll-container" class="btn-group">
    <button class="btn btn-primary" id="selectAll">Select All</button>
    <button class="btn btn-success" id="export">Export</button>
  </div>
</div>

<table class="display" id="gradStudentsTable">
    <thead>
        <tr>
            <th>Name</th>
            <th>Graduated</th>
            <th>Class Level</th>
        </tr>
    </thead>
  <tbody>
    {% for user in users %}
    <tr data-student-type="{% if user.isBonnerScholar %}bonner{% else %}all{% endif %}">
      <td><a href="/profile/{{ user.username }}" target="_blank">{{ user.firstName }} {{ user.lastName }} </a><svg width="20px" height="20px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
      </svg></td>
      <td><input type="checkbox" class="graduated-checkbox" data-username="{{ user.username }}" {% if user.hasGraduated %}checked{% endif %}></td>
      <td>{{ user.classLevel }}</td>

    </tr>
    {%endfor%}
  </tbody>  
</table>

{% endblock %}