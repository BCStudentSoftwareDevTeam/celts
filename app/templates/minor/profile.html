{% set title = "Student Minor Page" %}
{% extends "base.html" %}

{% block scripts %}
  {{ super() }}
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.5.4/bootstrap-select.js"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='js/cceMinorProfilePage.js') }}?u={{ lastStaticUpdate }}"></script>
{% endblock %}

{% block styles %}
  {{ super() }}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/minor.css') }}?u={{ lastStaticUpdate }}">
{% endblock %}

{% block app_content %}
  <div class="row">
    <input id="username" value="{{ user.username }}" hidden />
    <div class="row">
      <div class="col">
        <h1>{{ user.firstName }} {{ user.lastName }}'s CCE Minor Profile</h1>
      </div>
    </div>
    <div class="row">
      <ul class="nav nav-tabs nav-fill mx-3 mb-3" id="pills-tab" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link {{ 'active' if activeTab == 'studentLedEvents' or activeTab is not defined else '' }}" id="studentLedEvents-tab"
            data-bs-toggle="pill" data-bs-target="#pills-student-led" type="button" role="tab" aria-controls="pills-student-led" aria-selected="true">Sustained Community Engagements</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link {{ 'active' if activeTab == 'trainingEvents' else '' }}" id="trainingEvents-tab"
            data-bs-toggle="pill" data-bs-target="#pills-training" type="button" role="tab" aria-controls="pills-training" aria-selected="false">Summer Experience</button>
        </li>
        {% if user.isCeltsAdmin or user.isCeltsStudentStaff or user.isBonnerScholar %}
        <li class="nav-item" role="presentation">
          <button class="nav-link {{ 'active' if activeTab == 'bonnerScholarsEvents' else '' }}" id="bonnerScholarsEvents-tab"
            data-bs-toggle="pill" data-bs-target="#pills-bonner-scholars" type="button" role="tab" aria-controls="pills-bonner-scholars" aria-selected="false">Requesting Other Engagement</button>
        </li>
        {% endif %}
      </ul>
    </div>
    <div class="tab-content" id="pills-tabContent">
      <div class="tab-pane fade {{ 'show active' if activeTab == 'studentLedEvents' or activeTab is not defined else '' }}" id="pills-student-led" role="tabpanel" aria-labelledby="studentLedEvents-tab">
        <p class="pt-2">Approximately two hours of engagement over about ten weeks of a semester. Only two engagement activities can be credited in a single semester.</p>
        <div class="accordion" id="communityEngagement">
          {% if sustainedEngagementByTerm %}
          {% for term, engagements in sustainedEngagementByTerm.items() %}
          <div class="accordion-item">
            <h3 class="accordion-header" id="heading{{ loop.index }}">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ loop.index }}" aria-expanded="false" aria-controls="collapse{{ loop.index }}">
                {{ term }}
              </button>
            </h3>
            <div id="collapse{{ loop.index }}" class="accordion-collapse collapse" aria-labelledby="heading{{ loop.index }}" data-bs-parent="#communityEngagement">
              <div class="accordion-body">
                <div class="container-fluid">
                  <div class="row d-flex justify-content-center mb-3">
                    <div class="col-md-6 mb-3">
                      <table class="table">
                        <thead>
                          <tr>
                            <th scope="col">Community Engagement Activity</th>
                          </tr>
                        </thead>
                        <tbody>
                          {% for engagement in engagements %}
                          <tr class="engagement-row" data-engagement-data='{{ engagement|tojson }}'>
                            <td>
                              <input type="checkbox" {{ 'checked' if engagement['matched'] else '' }} />
                              <button type="button" class="btn btn-link">{{ engagement["name"] }}</button>
                            </td>
                          </tr>
                          {% endfor %}
                        </tbody>
                      </table>
                    </div>
                    <div class="col-md-6 p-3" id="set{{ term }}">
                      Click on an engagement entry to see your event history or course information.
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          {% endfor %}
          {% else %}
          <h2>You have not participated in any service learning events or courses.</h2>
          {% endif %}
        </div>
      </div>
      <div class="tab-pane fade {{ 'show active' if activeTab == 'trainingEvents' else '' }}" id="pills-training" role="tabpanel" aria-labelledby="trainingEvents-tab">
        <div class="pt-4">
          <form id="requestOtherCommEng" enctype="multipart/form-data" role="form" action="{{ request.path }}" method="POST">
            <div class="container">
              <div class="row">
                <div class="col">
                  <h2 class="form-label" style="color: #000000;">COMMUNITY AND CIVIC ENGAGEMENT MINOR (CCE)</h2>
                  <h3>Proposal for Community-Engaged Summer Experience</h3>
                  <p>
                    The minor requires an Intensive Community-Engaged Summer Experience that is focused on work that more deeply explores at least one of the four following key content areas: power and inequality, community and identity, civic literacy, or civic skills. Please fill out the following form and return to your CCE Minor Advisor for approval.
                  </p>
                </div>
              </div>
              <div class="row">
                <div class="form-group col-md-6">
                  <label for="studentName">Student Name:</label>
                  <input type="text" class="form-control" id="studentName" name="studentName">
                </div>
                <div class="form-group col-md-6">
                  <label for="date">Today's Date:</label>
                  <input type="date" class="form-control" id="date" name="date">
                </div>
              </div>
              <div class="form-group">
                <label for="studentEmail">Student Email:</label>
                <input type="email" class="form-control" id="studentEmail" name="studentEmail">
                <label for="organizationName">Name of Organization you will work with for summer experience:</label>
                <input type="text" class="form-control" id="organizationName" name="organizationName">
                <label for="organizationAddress">Physical Address of organization:</label>
                <input type="text" class="form-control" id="organizationAddress" name="organizationAddress">
                <label for="organizationPhone">Phone number and website of organization:</label>
                <input type="text" class="form-control" id="organizationPhone" name="organizationPhone">
                <label for="supervisor">Direct Supervisor (or "yet to be determined"):</label>
                <input type="text" class="form-control" id="supervisor" name="supervisor">
                <label for="supervisorContact">Supervisor's contact phone/email:</label>
                <input type="text" class="form-control" id="supervisorContact" name="supervisorContact">
                <label for="roleDescription">Briefly describe your role and scope of work with this organization during your community-engaged experience:</label>
                <textarea class="form-control" id="roleDescription" name="roleDescription"></textarea>
              </div>
              <div class="form-group">
                <label>Which of the following existing community-based experiences will you take part in during the summer? Please check one.</label><br>
                <input type="checkbox" id="internship" name="experience" value="Internship">
                <label for="internship">Internship</label><br>
                <input type="checkbox" id="cbr" name="experience" value="Community-based research">
                <label for="cbr">Community-based research (CBR) within URCPP or other research that meets established criteria</label><br>
                <input type="checkbox" id="communityLabor" name="experience" value="Community-Based Labor Position">
                <label for="communityLabor">Community-Based Labor Position, either in Berea or through the Off-Campus Summer Labor Experience</label><br>
                <input type="checkbox" id="epgInternship" name="experience" value="EPG Summer Internship">
                <label for="epgInternship">EPG Summer Internship</label><br>
                <input type="checkbox" id="bonnerService" name="experience" value="Bonner Scholar Summer of Service">
                <label for="bonnerService">Bonner Scholar Summer of Service</label><br>
                <input type="checkbox" id="campusLabor" name="experience" value="Campus Labor Experience">
                <label for="campusLabor">Campus Labor Experience</label><br>
              </div>
              <div class="form-group">
                <label for="experienceHours">Will your experience include at least 300 hours of work over the span of at least 8 weeks with a public-facing organization?</label>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="experienceHoursYes" name="experienceHours" value="Yes">
                  <label class="form-check-label" for="experienceHoursYes">Yes</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="experienceHoursNo" name="experienceHours" value="No">
                  <label class="form-check-label" for="experienceHoursNo">No</label>
                  <div id="additionalHoursInput" style="display: none;">
                    <label for="hoursWeeks">If no, how many hours over how many weeks will you spend engaged in this summer experience?</label>
                    <textarea class="form-control" id="hoursWeeks" name="hoursWeeks" rows="2"></textarea>
                  </div>
                </div>
              </div>              
              <div class="form-group">
                <label for="requestUpload">Attach a copy of your proposal (maximum of 3 pages).</label>
                <input type="file" class="form-control-file" id="requestUpload" name="requestUpload" aria-describedby="requestUploadHelp">
                <small id="requestUploadHelp" class="form-text text-muted">Only PDF files are accepted.</small>
              </div>
              <button type="submit" class="btn btn-outline-dark" value="sendData" onclick="michaelspaul54@gmail.com()">Submit</button>
            </div>
          </form>
        </div>
      </div>
      {% if user.isCeltsAdmin or user.isCeltsStudentStaff or user.isBonnerScholar %}
      <div class="tab-pane fade {{ 'show active' if activeTab == 'bonnerScholarsEvents' else '' }}" id="pills-bonner-scholars" role="tabpanel" aria-labelledby="bonnerScholarsEvents-tab">
        <p class="pt-2">Your own or partner organization's work may impact the United States more widely, often in significant areas of concern. The project plays a pivotal role in one of two ways, and is likely to be increased. At what point, a research goal might be established. One of a kind is being recognized.
      </div>
      {% endif %}
    </div>
  </div>
{% endblock %}
