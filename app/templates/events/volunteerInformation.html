{% set title = "Volunteer Information" %}
{% set page_title = eventData.name %}
{% set eventPast = event.isPast %}
{% set tabName = 'dietary' %}
{% extends "eventNav.html" %}

{% block styles %}
{{super()}}
<style>
  @media print{
    #volunteerInformationCardToPrint {
      column-count: 2;
    }
    .print-column {
        column-count: 1;
        column-gap: 20px;
        break-inside: avoid;
    }
    #volunteerInformationTableToPrint {
       position:fixed;
       left:10px;
    }
  }
</style>
{% endblock %}

{% block scripts %}
{{super()}}
<script type="module" src="/static/js/volunteerInformation.js"></script>
{% endblock %}

{% block app_content %}

{{super()}}



{% if attendedUser or waitlistUser or rsvpUser %}
  <div class="noprint" id="volunteerInformationcheck">
    <div class="row">
      <div class="col">
        <label><b>Volunteer Groups:</b></label><br>
        {% if rsvpUser %}
        <input class="displayCheckbox noprint" type="checkbox" name="selected_items" id="rsvpSelect" checked>
        <label for="rsvpSelect">RSVP Information</label><br>
        {% endif %}
        {% if waitlistUser %}
        <input class="displayCheckbox noprint" type="checkbox" name="selected_items" id="waitlistSelect" checked>
        <label for="waitlistSelect">Waitlist</label><br>
        {% endif %}
        {% if attendedUser %}
        <input class="displayCheckbox noprint" type="checkbox" name="selected_items" id="attendedSelect" checked>
        <label for="attendedSelect">Attended</label><br>
        {% endif %}
      </div>
      <div class="col">
        <label><b>Included Information:</b></label><br>
        <input class="displayCheckbox noprint" type="checkbox" name="selected_items" id="dietRestrictionSelect" checked>
        <label for="dietRestrictionSelect">Dietary Restriction</label><br>
        <input class="displayCheckbox noprint" type="checkbox" name="selected_items" id="phoneSelect" checked>
        <label for="phoneSelect">Phone Number</label><br>
        <input class="displayCheckbox noprint" type="checkbox" name="selected_items" id="emailSelect" checked>
        <label for="emailSelect">Email</label><br>
      </div>
      <div class="col-2 mb-2 float-right" >
        <button class="btn btn-primary" id="tableCardToggle">Table View</button>
      </div>
      <div class="col-auto align-items-end">
        <button id="printVolunteerInfo" class="btn-primary btn">Print</button>
      </div>
    </div>
  </div>
 
  <hr>

  <div id="volunteerInformationCardToPrint">
    <div class="row sort-here">
    {% set combinedParticipants = attendedUser + rsvpUser %}
    {% set printedNames = [] %}
    {% set uniqueParticipants = combinedParticipants | unique %}
    {% for participant in uniqueParticipants %}
      {% set isAttended = participant in attendedUser %}
      {% set isRSVPed = participant in rsvpUser %}
      {% set isWaitlist = participant in waitlistUser %}
    
      {% if isRSVPed %}
        <div class="rsvpSelect col-12 col-md-6 volunteerInfoEntries print-column" data-user="{{participant.username}}">
          <h4 class="nameSelect" nowrap><b>{{ participant.firstName }} {{ participant.lastName }}</b></h4>
          <ul>
            <div class="phoneSelect" nowrap>{{ participant.phoneNumber }}</div>
            <div class="emailSelect" nowrap>{{ participant.email }}</div>
            <div class="dietRestrictionSelect">Dietary Restrictions: {{ participant.dietRestriction }}</div>
          </ul>
        </div>
      {% endif %}
      {% if isAttended%}
        <div class="attendedSelect col-12 col-md-6 volunteerInfoEntries print-column" data-user="{{participant.username}}">
          <h4 class="nameSelect" nowrap><b>{{ participant.firstName }} {{ participant.lastName }}</b></h4>
          <ul>
            <div class="phoneSelect" nowrap>{{ participant.phoneNumber }}</div>
            <div class="emailSelect" nowrap>{{ participant.email }}</div>
            <div class="dietRestrictionSelect">Dietary Restrictions: {{ participant.dietRestriction }}</div>
          </ul>
        </div>
      {% endif %}
      {% if isWaitlist %}
        <div class="waitlistSelect col-12 col-md-6 volunteerInfoEntries print-column" data-user="{{participant.username}}">
          <h4 class="nameSelect" nowrap><b>{{ participant.firstName }} {{ participant.lastName }}</b></h4>
          <ul>
            <div class="phoneSelect" nowrap>{{ participant.phoneNumber }}</div>
            <div class="emailSelect" nowrap>{{ participant.email }}</div>
            <div class="dietRestrictionSelect">Dietary Restrictions: {{ participant.dietRestriction }}</div>
          </ul>
        </div>
      {% endif %}
    {% endfor %}
    </div>
  </div>
      <table class="fs-5" id ="volunteerInformationTableToPrint">
        <thead>
          <tr>
            <th class="border p-2 text-center">Name</th>
            <th class="border p-2 text-center phoneSelect">Phone Number</th>
            <th class="border p-2 text-center emailSelect">Email</th>
            <th class="border p-2 text-center dietRestrictionSelect">Dietary Restriction</th>
          </tr>
        </thead>
          {% set combinedParticipants = attendedUser + rsvpUser %}
          {% set printedNames = [] %}
          {% set uniqueParticipants = combinedParticipants | unique %}
          {% for participant in uniqueParticipants %}
            {% set isAttended = participant in attendedUser %}
            {% set isRSVPed = participant in rsvpUser %}
            {% set isWaitlist = participant in waitlistUser %}
        <tbody>
          {% if isRSVPed %}
          <tr class="rsvpSelect volunteerInfoEntries" data-user="{{participant.username}}">
            <td class="border p-1 px-3 nameSelect" nowrap><b>{{ participant.firstName }} {{ participant.lastName }}</b></td>
            <td class="border p-1 px-3 phoneSelect" nowrap>{{ participant.phoneNumber }}</td>
            <td class="border p-1 px-3 emailSelect" nowrap>{{ participant.email }}</td>
            <td class="border p-1 px-3 dietRestrictionSelect">{{ participant.dietRestriction }}</td>
          </tr>
          {% endif %}
          {% if isAttended%}
          <tr class="attendedSelect volunteerInfoEntries" data-user="{{participant.username}}">
            <td class="border p-1 px-3 nameSelect" nowrap><b>{{ participant.firstName }} {{ participant.lastName }}</b></td>
            <td class="border p-1 px-3 phoneSelect" nowrap>{{ participant.phoneNumber }}</td>
            <td class="border p-1 px-3 emailSelect" nowrap>{{ participant.email }}</td>
            <td class="border p-1 px-3 dietRestrictionSelect">{{ participant.dietRestriction }}</td>
          </tr>
          {% endif %}
          {% if isWaitlist %}
          <tr class="waitlistSelect volunteerInfoEntries" data-user="{{participant.username}}">
            <td class="border p-1 px-3 nameSelect" nowrap><b>{{ participant.firstName }} {{ participant.lastName }}</b></td>
            <td class="border p-1 px-3 phoneSelect" nowrap>{{ participant.phoneNumber }}</td>
            <td class="border p-1 px-3 emailSelect" nowrap>{{ participant.email }}</td>
            <td class="border p-1 px-3 dietRestrictionSelect">{{ participant.dietRestriction }}</td>
          </tr>
          {% endif %}
        </tbody>
      {% endfor %}
      </table>



    
  
{% else %}
  <h3>No volunteer information available for this event.</h3>
{% endif %}

{% endblock %}
