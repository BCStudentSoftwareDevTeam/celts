{% set title = "Event Kiosk"%}
{% extends "base.html"%}
{% block scripts %}
  {{super()}}
  <script src="/static/js/eventKiosk.js"></script>

{% endblock %}

{% block styles %}
  {{super()}}

{% endblock %}

{% block app_content %}
  
<script>
  function triggerCamera() {
    // JavaScript code for triggering the camera
    // Get the result container element (problem is that the result container is the textbox in the HTML div below)
    // var resultContainer = document.getElementById('result');
    // Check if the browser supports the getUserMedia method
    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
      // Request permission to access the camera
      navigator.mediaDevices.getUserMedia({ video: {facingMode: 'environment'} })
        .then(function(stream) {
          // Access to the camera is granted, do something with the stream
          var videoElement = document.createElement('video');
          videoElement.srcObject = stream;
          document.body.appendChild(videoElement);
          
          // Optional: Play the video stream
          videoElement.play();
        })
        .catch(function(error) {
          // An error occurred or the user denied permission, handle the error
          console.log('Unable to access the camera:', error);
        });
    } else {
      // The getUserMedia method is not supported by the browser
      console.log('getUserMedia is not supported');
    }
  }
</script>

  <div>
    <h1 class="my-5" align="center">{{event.name}}</h1>
    <h2 class="m-5" align="center">{{bNumberToUser}}</h2>
  </div>
  <div id="signinData" class="mx-auto px-5 mb-2">
    <div class="input-group">
      <input type="text" id="submitScannerData" name="bNumber" class="form-control input-lg" oninput="submitData()" style="font-size: 2rem;" placeholder="Enter scanner data" autofocus/>
      <button type="button" class="btn btn-primary" id="cameraButton" onclick="triggerCamera()"><span class="bi bi-camera"></span></button>
    </div>
  </div>
  <div class="form-check form-switch mx-5 position-absolute end-0">
    <input class="form-check-input mt-2" type="checkbox" id="fullscreenCheck" onclick="toggleFullscreen()">
    <label class="form-check-label" id="fullscreenLabel" for="fullscreenCheck">Toggle Full Screen</label>
    <a class="btn btn-primary ms-3" href="/event/{{event.id}}/track_volunteers" role="button">Back</a>
  </div>

  <input type="hidden" value="{{eventid}}" id="eventid">

  {% endblock %}
